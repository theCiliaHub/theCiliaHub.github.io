<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CiliaHub</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ”¬</text></svg>">
</head>
<body>

    <nav class="navbar">
        <div class="nav-container">
            <a href="#/home" class="logo">CiliaHub</a>
            <ul class="nav-links">
                <li><a href="#/home" class="nav-link" data-page="home-page">Home</a></li>
                <li><a href="#/ciliaplot" class="nav-link" data-page="analysis-page">CiliaPlot</a></li>
                <li><a href="#/batch" class="nav-link" data-page="batch-page">Batch Query</a></li>
                <li><a href="#/compare" class="nav-link" data-page="compare-page">Compare</a></li>
                <li><a href="#/expression" class="nav-link" data-page="expression-page">Expression</a></li>
                <li><a href="#/download" class="nav-link" data-page="download-page">Download</a></li>
                <li><a href="#/contact" class="nav-link" data-page="contact-page">Contact</a></li>
            </ul>
        </div>
    </nav>

    <div class="main-container">
        
        <aside class="cilia-panel">
            <h2>Interactive Cilium</h2>
            <div class="cilia-diagram">
                <svg viewBox="0 0 200 300" id="cilia-svg" aria-labelledby="ciliaTitle ciliaDesc">
                    <title id="ciliaTitle">Interactive Cilium Diagram</title>
                    <desc id="ciliaDesc">A diagram of a cell with a cilium. Different parts can be clicked.</desc>
                    <path id="cell-body" class="cilia-part" d="M 20 150 A 80 80 0 1 1 180 150 L 180 280 A 20 20 0 0 1 160 300 L 40 300 A 20 20 0 0 1 20 280 Z" />
                    <circle id="nucleus" class="cilia-part" cx="100" cy="220" r="30" />
                    <path id="basal-body" data-name="Basal Body" class="cilia-part cilia" d="M 90 140 L 90 150 L 110 150 L 110 140 Z" />
                    <path id="transition-zone" data-name="Transition Zone" class="cilia-part cilia" d="M 95 120 L 95 140 L 105 140 L 105 120 Z" />
                    <path id="axoneme" data-name="Axoneme" class="cilia-part cilia" d="M 98 10 L 98 120 L 102 120 L 102 10 A 2 2 0 0 1 100 8 A 2 2 0 0 1 98 10 Z" />
                </svg>
            </div>
            <div id="geneButtons">
                <button class="gene-btn default" data-part="axoneme">Axoneme</button>
                <button class="gene-btn default" data-part="transition-zone">Transition Zone</button>
                <button class="gene-btn default" data-part="basal-body">Basal Body</button>
                <button class="gene-btn reset-btn" id="resetCilium">Reset View</button>
            </div>
            <p id="gene-localization-info" style="margin-top: 1rem; font-weight: bold; color: var(--primary-dark);"></p>
        </aside>

        <main class="content-area">
            
            <section id="home-page" class="page-section active">
                <h1>Welcome to CiliaHub ðŸ”¬</h1>
                <p>Your comprehensive resource for genes with ciliary functions. Explore our database, compare genes, and visualize expression data.</p>
                <div class="search-container">
                    <div class="search-wrapper">
                        <input type="text" id="gene-search-input" placeholder="Search for a gene (e.g., TTC8, CEP290)...">
                        <div id="search-suggestions"></div>
                    </div>
                    <button id="gene-search-btn" class="search-btn">Search</button>
                </div>
                <h2>Featured Genes</h2>
                <div id="gene-cards-container" class="gene-cards">
                    </div>
                <div class="pagination">
                    <button id="prev-page" class="btn">Previous</button>
                    <span id="page-info">Page 1</span>
                    <button id="next-page" class="btn">Next</button>
                </div>
            </section>

            <section id="gene-page" class="page-section gene-detail-page">
                <div class="breadcrumb">Home / Gene / <span id="gene-breadcrumb-name">GENE</span></div>
                <div class="gene-header">
                    <h1 class="gene-name" id="gene-page-name">Gene Name</h1>
                    <p class="gene-description" id="gene-page-description">Gene description will be loaded here.</p>
                </div>
                <div class="gene-details-grid">
                    <div class="details-column" id="gene-details-left">
                        <div class="detail-card">
                            <h3 class="card-title">Functional Information</h3>
                            <div class="info-item">
                                <strong>Molecular Function:</strong>
                                <div id="gene-molecular-function" class="tags-container"></div>
                            </div>
                            <div class="info-item">
                                <strong>Biological Process:</strong>
                                <div id="gene-biological-process" class="tags-container"></div>
                            </div>
                        </div>
                        <div class="detail-card">
                            <h3 class="card-title">References</h3>
                            <ul id="gene-references" class="reference-list"></ul>
                        </div>
                    </div>
                    <div class="details-column" id="gene-details-right">
                        <div class="detail-card">
                            <h3 class="card-title">Identifiers</h3>
                            <div id="gene-identifiers" class="info-item"></div>
                        </div>
                        <div class="detail-card">
                            <h3 class="card-title">Subcellular Localization</h3>
                            <div id="gene-localization" class="tags-container"></div>
                        </div>
                        <div class="detail-card">
                            <h3 class="card-title">Complex Info</h3>
                            <div id="gene-complex-info" class="info-item"></div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="analysis-page" class="page-section enrichment-page">
                <div class="enrichment-header">
                    <h1>CiliaPlot Analysis</h1>
                    <p>Enter a gene list to perform functional enrichment analysis and generate visualizations.</p>
                </div>
                <div class="enrichment-layout">
                    <div class="enrichment-controls-panel">
                        <h3>1. Input Genes</h3>
                        <textarea id="enrichment-genes-input" placeholder="Enter gene symbols, one per line (e.g., ARL13B, BBS1, CEP290)"></textarea>
                        <div id="enrichment-actions">
                             <h3>2. Plot Type</h3>
                             <div class="plot-type-selection">
                                <label><input type="radio" name="plotType" value="bubble" checked> Bubble</label>
                                <label><input type="radio" name="plotType" value="matrix"> Matrix</label>
                             </div>
                             <div class="action-buttons">
                                <button id="run-enrichment-btn" class="btn btn-primary">Generate Plot</button>
                                <div id="download-controls">
                                     <button id="download-plot-svg" class="btn btn-secondary btn-sm">SVG</button>
                                     <button id="download-plot-png" class="btn btn-secondary btn-sm">PNG</button>
                                </div>
                             </div>
                        </div>
                        <details id="plot-customization-details">
                            <summary>3. Customize Plot (Optional)</summary>
                            <div id="plot-settings-panel">
                                <div><label for="font-family">Font Family:</label><input type="text" id="font-family" value="Arial"></div>
                                <div><label for="font-size">Font Size:</label><input type="number" id="font-size" value="12"></div>
                                <div><label for="font-weight">Font Weight:</label><select id="font-weight"><option value="normal">Normal</option><option value="bold">Bold</option></select></div>
                                <div><label for="text-color">Text Color:</label><input type="color" id="text-color" value="#333333"></div>
                                <div><label for="y-axis-title">Y-Axis Title:</label><input type="text" id="y-axis-title" value="Enriched Terms"></div>
                                <div><label for="color-1">Color 1 (Low):</label><input type="color" id="color-1" value="#2c5aa0"></div>
                                <div><label for="color-2">Color 2 (High):</label><input type="color" id="color-2" value="#e74c3c"></div>
                            </div>
                        </details>
                    </div>
                    <div class="enrichment-plot-panel">
                        <div class="plot-area" id="plot-display-area">
                             <div class="status-message" id="plot-placeholder">Your plot will appear here.</div>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="batch-page" class="page-section">
                <h1>Batch Gene Query</h1>
                <p>Enter a list of gene names to retrieve their information in bulk.</p>
                <textarea id="batch-genes-input" placeholder="Enter gene names, one per line or separated by commas/spaces."></textarea>
                <input type="file" id="csv-upload" accept=".csv,.txt">
                <button id="batch-query-btn" class="btn btn-primary">Query Genes</button>
                <div id="batch-results" class="table-container"></div>
            </section>

            <section id="compare-page" class="page-section">
                 <h1>Compare Genes</h1>
                 <p>Select multiple genes to compare their functions and associations side-by-side.</p>
                 <div class="comparison-tool">
                    <div class="search-container">
                        <div class="search-wrapper">
                            <input type="text" id="compare-search-input" placeholder="Add genes to comparison...">
                            <div id="compare-search-suggestions"></div>
                        </div>
                        <button id="add-gene-btn" class="btn btn-primary">Add Gene</button>
                    </div>
                    <div id="gene-tags-container" class="gene-tags-container"></div>
                    <div class="comparison-controls">
                        <div class="tabs">
                            <button class="tab-link active" data-tab="table-view">Table</button>
                            <button class="tab-link" data-tab="venn-diagram-view">Venn Diagram</button>
                            <button class="tab-link" data-tab="upset-plot-view">Upset Plot</button>
                        </div>
                        <button id="clear-comparison-btn" class="btn btn-secondary">Clear All</button>
                    </div>
                    <div id="table-view" class="tab-content active"><div id="comparison-table" class="table-container"></div></div>
                    <div id="venn-diagram-view" class="tab-content chart-container"><canvas id="venn-diagram"></canvas></div>
                    <div id="upset-plot-view" class="tab-content chart-container"><div id="upset-plot"></div></div>
                 </div>
            </section>

            <section id="expression-page" class="page-section">
                <h1>Gene Expression</h1>
                <p>Visualize gene expression data across different tissues and conditions.</p>
                <div class="status-message">Expression analysis tools are coming soon!</div>
            </section>

            <section id="download-page" class="page-section">
                <h1>Download Data</h1>
                <p>Download complete datasets from CiliaHub for your own research.</p>
                <div class="download-options">
                    <a href="#" class="btn btn-primary">Download All Ciliary Genes (CSV)</a>
                    <a href="#" class="btn btn-primary">Download Gene Annotations (GFF)</a>
                </div>
            </section>

            <section id="contact-page" class="page-section">
                <h1>Contact Us</h1>
                <div class="contact-info">
                    <h2>Get in Touch</h2>
                    <ul>
                        <li><strong>Email:</strong> <a href="mailto:info@ciliahub.org">info@ciliahub.org</a></li>
                        <li><strong>Twitter:</strong> <a href="#">@CiliaHub</a></li>
                    </ul>
                </div>
                <div class="feedback-form">
                    <h2>Send Feedback</h2>
                    <textarea id="feedback-text" placeholder="Have a suggestion or found an issue? Let us know!"></textarea>
                    <button id="submit-feedback-btn" class="btn btn-primary">Submit</button>
                </div>
            </section>
        </main>
    </div>

    <script src="https://cdn.plot.ly/plotly-2.32.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.3.0/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@upsetjs/core/dist/bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@upsetjs/plots/dist/bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jstat@latest/dist/jstat.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@panzoom/panzoom/dist/panzoom.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <script src="globals.js"></script>
    <script src="plots.js"></script>
    <script src="script.js"></script>

</body>
</html>
