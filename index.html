<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The CiliaHub: A Database of Genes with Ciliary Functions</title>
    <meta name="description" content="The CiliaHub is a comprehensive bioinformatics database for genes with ciliary functions.">
    <link rel="icon" type="image/png" href="CiliaHub_Logo_web.png">
    <link rel="stylesheet" href="styles.css">

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@panzoom/panzoom@4.5.1/dist/panzoom.min.js"></script>
    <script src="https://unpkg.com/@upsetjs/bundle"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jstat@latest/dist/jstat.min.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="#/" onclick="navigateTo(event, '/')" class="logo">CiliaHub</a>
            <ul class="nav-links">
                <li><a href="#/" onclick="navigateTo(event, '/')" aria-label="Home">Home</a></li>
                <li><a href="#/ciliaplot" onclick="navigateTo(event, '/ciliaplot')" aria-label="CiliaPlot">CiliaPlot</a></li>
                <li><a href="#/batch-query" onclick="navigateTo(event, '/batch-query')" aria-label="Batch Query">Batch Query</a></li>
                <li><a href="#/compare" onclick="navigateTo(event, '/compare')" aria-label="Compare">Compare</a></li>
                <li><a href="#/expression" onclick="navigateTo(event, '/expression')" aria-label="Expression">Expression</a></li>
                <li><a href="#/download" onclick="navigateTo(event, '/download')" aria-label="Download">Download</a></li>
                <li><a href="#/contact" onclick="navigateTo(event, '/contact')" aria-label="Contact">Contact</a></li>
            </ul>
        </div>
    </nav>

    <main class="main-container">
        <div class="content-area" id="content-area">
            <div id="home-page">
                <h1>Welcome to CiliaHub ðŸ”¬</h1>
                <p>Your comprehensive resource for genes with ciliary functions. Explore our database, compare genes, and visualize expression data.</p>
                <div class="call-to-action">
                    <a href="#/ciliaplot" onclick="navigateTo(event, '/ciliaplot')" class="cta-button">Perform Gene Analysis with CiliaPlot</a>
                </div>
            </div>

           <div id="ciliaplot-page" class="ciliaplot-page" style="display: none;">
                <section class="page-section">
                    <h1>CiliaPlot Gene Set Analysis</h1>
                    <p>Enter a list of genes to perform functional enrichment analysis and generate publication-ready visualizations.</p>
                </section>

                <div class="ciliaplot-top-section">

                    <div class="ciliaplot-input-panel">
                        <details class="ciliaplot-control-card" open>
                            <summary>1. Input Gene List</summary>
                            <div class="ciliaplot-card-content">
                                <p>Enter one gene symbol per line.</p>
                                <textarea id="ciliaplot-genes-input" placeholder="e.g., ARL13B&#10;IFT88&#10;BBS1&#10;CEP290"></textarea>
                            </div>
                        </details>
                        <button id="ciliaplot-generate-btn">Generate Plot</button>
                    </div>

                    <div class="ciliaplot-main-plot-panel">
                        <div class="ciliaplot-display-header">
                            <h3>Analysis Visualization</h3>
                            <div class="ciliaplot-download-options">
                                <button class="ciliaplot-download-btn">Download SVG</button>
                                <button class="ciliaplot-download-btn">Download PNG</button>
                            </div>
                        </div>
                        <div class="ciliaplot-plot-area">
                            <div class="status-message">Your plot will appear here.</div>
                        </div>
                    </div>
                </div>

                <div class="ciliaplot-bottom-section">
                    <div class="ciliaplot-controls-grid">
                        <details class="ciliaplot-control-card" open>
                            <summary>2. Select Plot Type</summary>
                            <div class="ciliaplot-card-content">
                                <div class="ciliaplot-plot-options">
                                    <div class="ciliaplot-plot-option">
                                        <label><input type="radio" name="plot-type" value="bubble" checked> Bubble Plot</label>
                                        <p class="ciliaplot-plot-option-desc">Visualizes significance and gene count.</p>
                                    </div>
                                    <div class="ciliaplot-plot-option">
                                        <label><input type="radio" name="plot-type" value="matrix"> Matrix Plot</label>
                                        <p class="ciliaplot-plot-option-desc">Shows genes vs. enriched terms.</p>
                                    </div>
                                </div>
                            </div>
                        </details>
                        <details class="ciliaplot-control-card">
                            <summary>3. Customize Plot</summary>
                            <div class="ciliaplot-card-content">
                                <div id="ciliaplot-settings-grid">
                                    <div><label for="setting-font-family">Font Family</label><input type="text" id="setting-font-family" value="Arial"></div>
                                    <div><label for="setting-font-size">Font Size</label><input type="number" id="setting-font-size" value="12"></div>
                                    <div><label for="setting-text-color">Text Color</label><input type="color" id="setting-text-color" value="#333333"></div>
                                    <div><label for="setting-enrichment-color1">Color Low</label><input type="color" id="setting-enrichment-color1" value="#e6f0f7"></div>
                                    <div><label for="setting-enrichment-color2">Color High</label><input type="color" id="setting-enrichment-color2" value="#0067a5"></div>
                                </div>
                            </div>
                        </details>
                    </div>

                    <div class="ciliaplot-results-table-container">
                        <h3>Enrichment Results Table</h3>
                        <table class="ciliaplot-results-table">
                            <thead>
                                <tr><th>Term ID</th><th>Description</th><th>P-value</th><th>Adj. P-value</th><th>Genes</th></tr>
                            </thead>
                            <tbody>
                                <tr><td>GO:0005929</td><td>cilium</td><td>1.25e-12</td><td>2.10e-10</td><td>15</td></tr>
                                <tr><td>GO:0030286</td><td>dynein complex</td><td>3.40e-9</td><td>4.50e-7</td><td>12</td></tr>
                                <tr><td>HP:0001250</td><td>Seizure</td><td>8.12e-7</td><td>9.30e-5</td><td>8</td></tr>
                                <tr><td>GO:0005886</td><td>plasma membrane</td><td>1.50e-6</td><td>1.65e-4</td><td>25</td></tr>
                                <tr><td>HP:0000518</td><td>Cataract</td><td>2.33e-5</td><td>2.41e-3</td><td>6</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
            <div id="compare-page" style="display: none;"></div>
            <div id="batch-query-page" style="display: none;"></div>
            <div id="expression-page" style="display: none;"></div>
            <div id="download-page" style="display: none;"></div>
            <div id="contact-page" style="display: none;"></div>
        </div>

        <aside class="cilia-panel">
            <div class="panel-header">
                <h3>Interactive Cilium</h3>
            </div>
            <div class="panel-content">
                <div class="cilia-container interactive-cilium">
                    <svg viewBox="0 0 300 400" xmlns="http://www.w3.org/2000/svg">
                        <path id="cell-body" class="cilia-part" tabindex="0" fill="none" d="M 50,380 C -20,300 20,200 150,200 C 280,200 320,300 250,380 Z"/>
                        <circle id="nucleus" class="cilia-part" tabindex="0" fill="#A7C7E7" cx="150" cy="320" r="40"/>
                        <rect id="basal-body" class="cilia-part" tabindex="0" fill="#2F2F2F" x="140" y="195" width="20" height="15"/>
                        <path id="transition-zone" class="ciliaplot-part" tabindex="0" fill="#9B59B6" d="M 142,195 L 138,180 L 162,180 L 158,195 Z"/>
                        <path id="ciliary-membrane" class="cilia-part" tabindex="0" fill="none" fill-opacity="0.5" d="M 138,180 L 145,10 L 155,10 L 162,180 Z"/>
                        <path id="axoneme" class="cilia-part" tabindex="0" fill="none" d="M 145,180 L 148,15 L 152,15 L 155,180 Z"/>
                    </svg>
                </div>
                <div class="controls">
                    <h4>Gene Localization:</h4>
                    <div id="geneButtons" class="gene-buttons"></div>
                </div>
            </div>
        </aside>
    </main>

    <div class="tooltip"></div>

    <footer class="footer" style="text-align: center;">
        <p>Â© 2025 CiliaHub. All rights reserved.</p>
    </footer>

    <script defer src="globals.js"></script>
    <script defer src="plots.js"></script>
    <script defer src="script.js"></script>
</body>
</html>
