<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The CiliaHub: A Database of Genes with Ciliary Functions</title>
    <meta name="description" content="The CiliaHub is a comprehensive bioinformatics database for genes with ciliary functions, providing resources for ciliopathy research, genome exploration, and gene search.">
    <meta name="keywords" content="cilia gene, ciliopathy, database, search, genome, bioinformatics, ciliary function, ciliary genes">
    <link rel="icon" type="image/png" href="CiliaHub_Logo_web.png">
    <link rel="stylesheet" href="styles.css">
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@panzoom/panzoom@4.5.1/dist/panzoom.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-XXXXXXXXXX'); // âœ¨ Replace with your real Google Analytics ID
    </script>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="/#" onclick="navigateTo(event, '/')" class="logo" aria-label="CiliaHub Home">CiliaHub</a>
            <ul class="nav-links">
                <li><a href="/#" onclick="navigateTo(event, '/')" aria-label="Home">Home</a></li>
                <li><a href="/#/enrichment" onclick="navigateTo(event, '/#/enrichment')" aria-label="Enrichment">Enrichment</a></li>
                </ul>
        </div>
    </nav>

    <main class="main-container">
        <div class="content-area" id="content-area">
            
            <div id="home-page" class="page-content">
                <h1>Welcome to CiliaHub ðŸ”¬</h1>
                <p>Your comprehensive resource for genes with ciliary functions. Explore our database, compare genes, and visualize expression data.</p>
                <div class="call-to-action">
                    <p>Get started by analyzing your gene list to discover ciliary localization patterns.</p>
                    <a href="/#/enrichment" onclick="navigateTo(event, '/#/enrichment')" class="cta-button">Perform Gene Enrichment Analysis</a>
                </div>
            </div>

            <div id="enrichment-page" class="page-content" style="display: none;">
                <h2>Ciliary Gene Enrichment Analysis</h2>
                <p>Paste your list of genes and CiliaHub will calculate how enriched your list is for known ciliary genes.</p>
                <textarea id="enrichment-genes-input" placeholder="e.g., TMEM17, IFT88, WDR31..." style="width: 100%; min-height: 150px; padding: 1rem; border: 2px solid #e1ecf4; border-radius: 10px; font-size: 1rem; margin-top: 1rem; resize: vertical;"></textarea>
                
                <div id="enrichment-controls" style="margin-top: 1rem; display: flex; align-items: center; gap: 20px; flex-wrap: wrap;">
                    <div>
                        <strong>Plot Type:</strong>
                        <input type="radio" id="plot-bubble" name="plot-type" value="bubble" checked>
                        <label for="plot-bubble" style="margin-right: 10px;">Localization</label>
                        <input type="radio" id="plot-matrix" name="plot-type" value="matrix">
                        <label for="plot-matrix" style="margin-right: 10px;">Gene Matrix</label>
                        <input type="radio" id="plot-ciliome" name="plot-type" value="ciliome">
                        <label for="plot-ciliome" style="margin-right: 10px;">Ciliome Enrichment</label>
                    </div>
                    <button id="generate-plot-btn" class="btn btn-primary" onclick="generateEnrichmentPlots()">Generate Plot</button>
                    <select id="download-format">
                        <option value="png">PNG</option>
                        <option value="pdf">PDF</option>
                    </select>
                    <button id="download-plot-btn" class="btn btn-secondary" style="display:none;" onclick="downloadPlot()">Download Plot</button>
                </div>

                <div class="customization-panel" style="margin-top: 20px; border: 1px solid #e1ecf4; border-radius: 8px; padding: 20px;">
                    <h3 style="font-weight: bold; margin-bottom: 5px; font-size: 1.2rem;">Plot Customization</h3>
                    <p style="font-size: 0.9rem; color: #555; margin-top: 0; margin-bottom: 20px;">Click "Generate Plot" after making changes to apply them.</p>
                    <style>
                        .customization-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 25px; }
                        .settings-group { display: flex; flex-direction: column; gap: 15px; }
                        .settings-group h4 { margin: 0 0 5px 0; font-size: 1rem; color: #333; border-bottom: 1px solid #eee; padding-bottom: 5px; }
                        .setting-item { display: flex; flex-direction: column; gap: 5px; }
                        .setting-item label { font-weight: 500; font-size: 0.9rem; color: #444; }
                        .setting-item input, .setting-item select { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
                    </style>
                    <div id="plot-settings-panel" class="customization-grid">
                        <div class="settings-group">
                            <h4>Typography</h4>
                            <div class="setting-item"><label for="setting-font-family">Font Family</label><select id="setting-font-family"><option>Arial</option><option>Tahoma</option><option>Verdana</option></select></div>
                            <div class="setting-item"><label for="setting-font-size">Label Font Size (Ticks)</label><input type="number" id="setting-font-size" value="14" min="8" max="30"></div>
                            <div class="setting-item"><label for="setting-font-weight">Font Weight</label><select id="setting-font-weight"><option value="normal">Normal</option><option value="bold" selected>Bold</option></select></div>
                            <div class="setting-item"><label for="setting-text-color">Text Color</label><input type="color" id="setting-text-color" value="#000000" style="padding: 2px; height: 35px;"></div>
                        </div>
                        <div class="settings-group">
                            <h4>Axes</h4>
                            <div class="setting-item"><label for="setting-axis-size">Axis Font Size (Titles)</label><input type="number" id="setting-axis-size" value="16" min="8" max="40"></div>
                            <div class="setting-item"><label for="setting-axis-color">Axis Color</label><input type="color" id="setting-axis-color" value="#000000" style="padding: 2px; height: 35px;"></div>
                            <div class="setting-item"><label for="setting-y-axis-title">Y-Axis Title</label><input type="text" id="setting-y-axis-title" value="Localization"></div>
                            <div class="setting-item"><label for="setting-x-axis-title">X-Axis Title</label><input type="text" id="setting-x-axis-title" value="Enrichment"></div>
                        </div>
                        <div class="settings-group">
                            <h4>Colors</h4>
                            <div class="setting-item"><label for="setting-bar-color">Bar Color (Ciliome Plot)</label><input type="color" id="setting-bar-color" value="#2ca25f" style="padding: 2px; height: 35px;"></div>
                            <div class="setting-item"><label for="setting-enrichment-color1">Enrichment Color (Low)</label><input type="color" id="setting-enrichment-color1" value="#edf8fb" style="padding: 2px; height: 35px;"></div>
                            <div class="setting-item"><label for="setting-enrichment-color5">Enrichment Color (High)</label><input type="color" id="setting-enrichment-color5" value="#006d2c" style="padding: 2px; height: 35px;"></div>
                        </div>
                    </div>
                </div>

                <div id="plot-container" style="display:none; margin-top: 2rem;">
                    <div id="bubble-enrichment-container" style="display: none; align-items: flex-start; gap: 0px;"></div>
                    <div id="matrix-plot-container" style="display: none;"></div>
                    <div id="ciliome-plot-container" style="display: none;"></div>
                </div>
            </div>

            </div>
        
        <aside class="cilia-panel">
            </aside>
    </main>

    <footer class="footer">
        <p>&copy; 2025 CiliaHub. All rights reserved.</p>
    </footer>

    <script src="script.js"></script>
    <script src="plots.js"></script>
</body>
</html>
