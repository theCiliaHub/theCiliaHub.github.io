<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The CiliaHub: A Database of Genes with Ciliary Functions</title>
    <meta name="description" content="The CiliaHub is a comprehensive bioinformatics database for genes with ciliary functions.">
    <link rel="icon" type="image/png" href="CiliaHub_Logo_web.png">
    <link rel="stylesheet" href="styles.css">

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@panzoom/panzoom@4.5.1/dist/panzoom.min.js"></script>
    <script src="https://unpkg.com/@upsetjs/bundle"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jstat@latest/dist/jstat.min.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="#/" onclick="navigateTo(event, '/')" class="logo">CiliaHub</a>
            <ul class="nav-links">
                <li><a href="#/" onclick="navigateTo(event, '/')" aria-label="Home">Home</a></li>
                <li><a href="#/ciliaplot" onclick="navigateTo(event, '/ciliaplot')" aria-label="CiliaPlot">CiliaPlot</a></li>
                <li><a href="#/ciliAI" onclick="navigateTo(event, '/ciliAI')" aria-label="CiliAI">CiliAI</a></li>
                <li><a href="#/batch-query" onclick="navigateTo(event, '/batch-query')" aria-label="Batch Query">Batch Query</a></li>
                <li><a href="#/compare" onclick="navigateTo(event, '/compare')" aria-label="Compare">Compare</a></li>
                <li><a href="#/expression" onclick="navigateTo(event, '/expression')" aria-label="Expression">Expression</a></li>
                <li><a href="#/download" onclick="navigateTo(event, '/download')" aria-label="Download">Download</a></li>
                <li><a href="#/contact" onclick="navigateTo(event, '/contact')" aria-label="Contact">Contact</a></li>
            </ul>
        </div>
    </nav>

    <main class="main-container">
        <div class="content-area" id="content-area">
            <div id="home-page">
                <h1>Welcome to CiliaHub ðŸ”¬</h1>
                <p>Your comprehensive resource for genes with ciliary functions. Explore our database, compare genes, and visualize expression data.</p>
                <div class="call-to-action">
                    <a href="#/ciliaplot" onclick="navigateTo(event, '/ciliaplot')" class="cta-button">Perform Gene Analysis with CiliaPlot</a>
                </div>
            </div>

           <div id="ciliaplot-page" class="ciliaplot-page" style="display: none;">
                <section class="page-section">
    <h1>CiliaPlot Gene Set Analysis</h1>
    <p>Enter a list of genes to perform functional enrichment and network analysis, generating publication-ready visualizations.</p>
</section>

<div class="ciliaplot-top-section">
    <div class="ciliaplot-input-panel">
        <details class="ciliaplot-control-card" open>
            <summary>1. Input Gene List</summary>
            <div class="ciliaplot-card-content">
                <p>Enter one gene symbol per line.</p>
                <textarea id="ciliaplot-genes-input" placeholder="e.g., ARL13B&#10;IFT88&#10;BBS1&#10;CEP290"></textarea>
            </div>
        </details>
        
        <details class="ciliaplot-control-card" open>
            <summary>2. Analysis Settings</summary>
            <div class="ciliaplot-card-content">
                <div class="setting-item">
                    <label for="enrichment-threshold-input">Enrichment Threshold:</label>
                    <input type="number" id="enrichment-threshold-input" value="1.5" min="1" step="0.1">
                </div>
                <hr>
                <div class="setting-item">
                    <label for="complex-filter">Filter by Complex:</label>
                    <select id="complex-filter"><option value="">All Complexes</option></select>
                </div>
                <div class="setting-item">
                    <label for="localization-filter">Filter by Localization:</label>
                    <select id="localization-filter"><option value="">All Localizations</option></select>
                </div>
            </div>
        </details>

        <details class="ciliaplot-control-card">
            <summary>3. Customize Plots</summary>
            <div class="ciliaplot-card-content">
                <div id="ciliaplot-settings-grid">
                    <div><label for="setting-font-family">Font Family</label><input type="text" id="setting-font-family" value="Arial"></div>
                    <div><label for="setting-font-size">Font Size</label><input type="number" id="setting-font-size" value="12"></div>
                    <div><label for="setting-text-color">Text Color</label><input type="color" id="setting-text-color" value="#333333"></div>
                    <div><label for="setting-enriched-color">Enriched Color</label><input type="color" id="setting-enriched-color" value="#2ecc71"></div>
                    <div><label for="setting-depleted-color">Depleted Color</label><input type="color" id="setting-depleted-color" value="#e74c3c"></div>
                </div>
            </div>
        </details>
        
        <button id="ciliaplot-generate-btn">Generate Analysis</button>
    </div>

    <div class="ciliaplot-main-plot-panel" id="ciliaplot-dashboard">
        
        <div id="ciliaplot-status-message" class="status-message">
            Enter genes and click "Generate Analysis" to see your results.
        </div>
        
        <div id="ciliaplot-results-container" style="display: none;">
            
            <section class="ciliaplot-result-section">
                <div class="ciliaplot-display-header">
                    <h3>Domain Enrichment Analysis</h3>
                    <div class="ciliaplot-download-options">
                        <button class="ciliaplot-download-btn" data-target="enrichment-plot-container" data-format="svg">Download SVG</button>
                        <button class="ciliaplot-download-btn" data-target="enrichment-plot-container" data-format="png">Download PNG</button>
                    </div>
                </div>
                <div id="enrichment-stats-container" class="stats-container"></div>
                <div id="enrichment-plot-container" class="plot-container"></div>
                <div id="enrichment-legend-container" class="legend"></div>
            </section>
            
            <section class="ciliaplot-result-section">
                <div class="ciliaplot-display-header">
                    <h3>Multi-Dimensional Gene Network</h3>
                    <div class="ciliaplot-controls-group">
                        <div class="view-toggle">
                            <button class="view-btn active" data-view="network">Network</button>
                            <button class="view-btn" data-view="matrix">Matrix</button>
                        </div>
                        <div class="ciliaplot-download-options">
                            <button class="ciliaplot-download-btn" data-target="multi-dim-plot-container" data-format="svg">Download SVG</button>
                            <button class="ciliaplot-download-btn" data-target="multi-dim-plot-container" data-format="png">Download PNG</button>
                        </div>
                    </div>
                </div>
                <div id="multi-dim-stats-container" class="stats-container"></div>
                <div id="multi-dim-plot-container" class="plot-container"></div>
                <div id="multi-dim-legend-container" class="legend"></div>
            </section>
        </div>
    </div>
</div>

<div id="enrichment-tooltip" class="tooltip"></div>
<div id="multi-dim-tooltip" class="tooltip"></div>
        </div>
            <div id="ciliAI-page" style="display: none;">
    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        <div class="max-w-6xl mx-auto bg-white dark:bg-black/80 backdrop-blur-sm rounded-xl shadow-lg p-6 sm:p-8">
            <header class="mb-6 text-center">
                <h1 class="text-3xl font-bold text-gray-800 dark:text-white">Cilia Gene Evidence Analyzer</h1>
                <p class="text-sm text-gray-600 dark:text-gray-300 mt-1">
                    Enter gene names to search a curated database for cilia-related experimental evidence.
                </p>
            </header>

            <!-- Input -->
            <div class="mb-6">
                <label for="gene-input" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                    Paste your gene list (one gene per line) or upload a .txt file
                </label>
                <textarea id="gene-input" rows="8" class="w-full p-3 bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm" placeholder="ZDHHC5&#10;WDR54&#10;IFT88&#10;ARL13B"></textarea>
                <input type="file" id="gene-file" accept=".txt" class="mt-2 text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-blue-900/40 dark:file:text-blue-300 dark:hover:file:bg-blue-900/60">
                <button id="analyze-btn" class="mt-4 w-full py-2 text-white font-medium bg-blue-600 hover:bg-blue-700 rounded-md shadow-md transition-transform active:scale-95 disabled:bg-blue-400 disabled:cursor-not-allowed">Analyze Genes</button>
            </div>
            
            <div id="info-display" class="hidden mb-4 p-4 rounded-lg">
                <p class="text-sm font-medium"></p>
            </div>

            <!-- Progress -->
            <div id="progress-container" class="hidden mb-4">
                <p id="progress-text" class="text-sm text-gray-600 dark:text-gray-300 mb-1"></p>
                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4 shadow-inner">
                    <div id="progress-bar" class="bg-blue-500 h-4 rounded-full text-xs text-blue-100 text-center p-0.5 leading-none transition-all duration-300" style="width:0%">0%</div>
                </div>
            </div>

            <!-- Results Table -->
            <div id="results-container" class="hidden mt-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-semibold text-gray-800 dark:text-white">Results</h2>
                    <div class="flex gap-2">
                        <button id="export-btn" class="px-4 py-2 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-md shadow-sm">Export CSV</button>
                        <button id="clear-btn" class="px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-md shadow-sm">Clear Results</button>
                    </div>
                </div>
                <div class="overflow-x-auto shadow-md rounded-lg">
                    <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                        <thead class="bg-gray-50 dark:bg-gray-800">
                            <tr>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Gene</th>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Confidence</th>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Ciliation Frequency</th>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Cilia Length</th>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Source Reference</th>
                            </tr>
                        </thead>
                        <tbody id="results-tbody" class="bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

            <div id="compare-page" style="display: none;"></div>
            <div id="batch-query-page" style="display: none;"></div>
            <div id="expression-page" style="display: none;"></div>
            <div id="download-page" style="display: none;"></div>
            <div id="contact-page" style="display: none;"></div>
        </div>

        <aside class="cilia-panel">
            <div class="panel-header">
                <h3>Interactive Cilium</h3>
            </div>
            <div class="panel-content">
                <div class="cilia-container interactive-cilium">
                    <svg viewBox="0 0 300 400" xmlns="http://www.w3.org/2000/svg">
                        <path id="cell-body" class="cilia-part" tabindex="0" fill="none" d="M 50,380 C -20,300 20,200 150,200 C 280,200 320,300 250,380 Z"/>
                        <circle id="nucleus" class="cilia-part" tabindex="0" fill="#A7C7E7" cx="150" cy="320" r="40"/>
                        <rect id="basal-body" class="cilia-part" tabindex="0" fill="#2F2F2F" x="140" y="195" width="20" height="15"/>
                        <path id="transition-zone" class="ciliaplot-part" tabindex="0" fill="#9B59B6" d="M 142,195 L 138,180 L 162,180 L 158,195 Z"/>
                        <path id="ciliary-membrane" class="cilia-part" tabindex="0" fill="none" fill-opacity="0.5" d="M 138,180 L 145,10 L 155,10 L 162,180 Z"/>
                        <path id="axoneme" class="cilia-part" tabindex="0" fill="none" d="M 145,180 L 148,15 L 152,15 L 155,180 Z"/>
                    </svg>
                </div>
                <div class="controls">
                    <h4>Gene Localization:</h4>
                    <div id="geneButtons" class="gene-buttons"></div>
                </div>
            </div>
        </aside>
    </main>

    <div class="tooltip"></div>

    <footer class="footer" style="text-align: center;">
        <p>Â© 2025 CiliaHub. All rights reserved.</p>
    </footer>

    <script defer src="globals.js"></script>
    <script defer src="plots.js"></script>
    <script defer src="script.js"></script>
</body>
</html>
